<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magnum Stars - Premium Farming</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/webapp/styles.css">
    
    <!-- Telegram WebApp API -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- 3D Starfield Background -->
    <canvas id="starfield" class="starfield-canvas"></canvas>
    
    <!-- Main App Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="logo-container">
                    <div class="logo-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">Magnum</span>
                        <span class="logo-subtitle">Stars</span>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <div class="balance-container">
                    <div class="balance-item stars-balance">
                        <div class="balance-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="balance-info">
                            <span class="balance-value" id="stars-value">0</span>
                            <span class="balance-label">Stars</span>
                        </div>
                    </div>
                    
                    <div class="balance-item coins-balance">
                        <div class="balance-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="balance-info">
                            <span class="balance-value" id="coins-value">0</span>
                            <span class="balance-label">Magnum Coins</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Farming Section -->
            <section id="farming-section" class="content-section active">
                <div class="farming-container">
                    <!-- User Info -->
                    <div class="user-info-card">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <div class="user-name" id="user-name">Пользователь</div>
                            <div class="user-level">
                                <span class="level-badge">Уровень <span id="user-level">1</span></span>
                                <div class="exp-bar">
                                    <div class="exp-fill" id="exp-fill"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Farming Button -->
                    <div class="farming-center">
                        <div class="farming-button-container">
                            <button class="farming-button" id="farming-btn">
                                <div class="button-glow"></div>
                                <div class="button-content">
                                    <i class="fas fa-hammer"></i>
                                    <span>Фармить</span>
                                </div>
                            </button>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="farming-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text">
                                <span id="progress-text">Готов к фарму</span>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="today-earned">0</div>
                                <div class="stat-label">Сегодня заработано</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="total-earned">0</div>
                                <div class="stat-label">Всего заработано</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Upgrades Section -->
            <section id="upgrades-section" class="content-section">
                <div class="section-header">
                    <h2>Улучшения</h2>
                    <p>Улучшайте свои возможности для большего заработка</p>
                </div>
                
                <div class="upgrades-grid" id="upgrades-grid">
                    <!-- Upgrades will be rendered here -->
                </div>
            </section>

            <!-- Exchange Section -->
            <section id="exchange-section" class="content-section">
                <div class="section-header">
                    <h2>Биржа</h2>
                    <p>Обменивайте валюты по текущему курсу</p>
                </div>
                
                <div class="exchange-container">
                    <div class="exchange-rate-card">
                        <div class="rate-info">
                            <span class="rate-label">Курс обмена</span>
                            <span class="rate-value" id="exchange-rate">1.0000</span>
                        </div>
                        <div class="rate-change" id="rate-change">
                            <i class="fas fa-arrow-up"></i>
                            <span>+0.00%</span>
                        </div>
                    </div>
                    
                    <div class="exchange-form">
                        <div class="input-group">
                            <input type="number" id="exchange-amount" placeholder="Сумма" min="1">
                            <select id="exchange-from">
                                <option value="mc">Magnum Coins</option>
                                <option value="stars">Stars</option>
                            </select>
                        </div>
                        
                        <div class="exchange-arrow">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        
                        <div class="result-container">
                            <div class="result-label">Получите:</div>
                            <div class="result-value" id="exchange-result">0</div>
                        </div>
                        
                        <button class="exchange-btn" id="exchange-btn">
                            <i class="fas fa-exchange-alt"></i>
                            Обменять
                        </button>
                    </div>
                    <div style="margin-top:16px">
                        <div class="section-header" style="margin-bottom:8px">
                            <h2 style="font-size:18px">История обменов</h2>
                            <p>Последние операции</p>
                        </div>
                        <div id="exchange-history" style="display:grid;gap:8px"></div>
                    </div>
                </div>
            </section>

            <!-- Miner Section -->
            <section id="miner-section" class="content-section">
                <div class="section-header">
                    <h2>Майнер</h2>
                    <p>Автоматический заработок каждую минуту</p>
                </div>
                
                <div class="miner-container">
                    <div class="miner-status-card">
                        <div class="miner-visual">
                            <div class="miner-machine" id="miner-machine">
                                <div class="miner-gear gear-1"></div>
                                <div class="miner-gear gear-2"></div>
                                <div class="miner-gear gear-3"></div>
                            </div>
                        </div>
                        
                        <div class="miner-info">
                            <div class="miner-status" id="miner-status">Неактивен</div>
                            <div class="miner-income" id="miner-income">0 MC/мин</div>
                        </div>
                        
                        <button class="miner-toggle-btn" id="miner-toggle-btn">
                            <i class="fas fa-power-off"></i>
                            <span>Запустить</span>
                        </button>
                    </div>
                    
                    <div class="miner-upgrades" id="miner-upgrades">
                        <!-- Miner upgrades will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks-section" class="content-section">
                <div class="section-header">
                    <h2>Задания</h2>
                    <p>Выполняйте задания для получения наград</p>
                </div>
                
                <div class="tasks-container">
                    <div class="tasks-tabs">
                        <button class="task-tab active" data-tab="daily">
                            <i class="fas fa-calendar-day"></i>
                            Ежедневные
                        </button>
                        <button class="task-tab" data-tab="achievements">
                            <i class="fas fa-trophy"></i>
                            Достижения
                        </button>
                    </div>
                    
                    <div class="tasks-content">
                        <div class="tasks-actions" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;align-items:center;">
                            <button class="btn" id="daily-bonus-btn" style="padding:8px 12px;">Ежедневный бонус</button>
                            <input type="text" id="promo-code" placeholder="Промокод" style="flex:1;min-width:140px;" />
                            <button class="btn btn-secondary" id="apply-promo-btn" style="padding:8px 12px;">Активировать</button>
                        </div>
                        <div class="task-list" id="daily-tasks">
                            <!-- Daily tasks will be rendered here -->
                        </div>
                        
                        <div class="task-list" id="achievement-tasks" style="display: none;">
                            <!-- Achievement tasks will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Referrals Section -->
            <section id="referrals-section" class="content-section">
                <div class="section-header">
                    <h2>Рефералы</h2>
                    <p>Приглашайте друзей и получайте бонусы</p>
                </div>
                
                <div class="referrals-container">
                    <div class="referral-stats">
                        <div class="referral-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="referrals-count">0</div>
                                <div class="stat-label">Приглашено друзей</div>
                            </div>
                        </div>
                        
                        <div class="referral-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="referral-earnings">0</div>
                                <div class="stat-label">Заработано с рефералов</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="referral-link-section">
                        <div class="link-container">
                            <input type="text" id="referral-link" readonly>
                            <button class="copy-btn" id="copy-referral-btn">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="referral-info">
                            <i class="fas fa-info-circle"></i>
                            <span>За каждого приглашенного друга вы получите 100 Magnum Coins</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Achievements Section -->
            <section id="achievements-section" class="content-section">
                <div class="section-header">
                    <h2>Достижения</h2>
                    <p>Разблокируйте достижения для получения бонусов</p>
                </div>
                
                <div class="achievements-container">
                    <div class="achievement-stats">
                        <div class="achievement-stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="achievements-completed">0</div>
                                <div class="stat-label">Выполнено достижений</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="achievements-grid" id="achievements-grid">
                        <!-- Achievements will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="content-section">
                <div class="section-header">
                    <h2>Настройки</h2>
                    <p>Настройте приложение под себя</p>
                </div>
                
                <div class="settings-container">
                    <div class="settings-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-bell"></i>
                                <span>Уведомления</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="notifications-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-volume-up"></i>
                                <span>Звуки</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="sound-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <i class="fas fa-save"></i>
                                <span>Автосохранение</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="auto-save-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="danger-zone">
                        <button class="danger-btn" id="reset-data-btn">
                            <i class="fas fa-trash"></i>
                            Сбросить данные
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-section="farming">
                <i class="fas fa-hammer"></i>
                <span>Фарм</span>
            </button>
            
            <button class="nav-item" data-section="upgrades">
                <i class="fas fa-arrow-up"></i>
                <span>Улучшения</span>
            </button>
            
            <button class="nav-item" data-section="exchange">
                <i class="fas fa-exchange-alt"></i>
                <span>Биржа</span>
            </button>
            
            <button class="nav-item" data-section="miner">
                <i class="fas fa-cog"></i>
                <span>Майнер</span>
            </button>
            
            <button class="nav-item" data-section="tasks">
                <i class="fas fa-tasks"></i>
                <span>Задания</span>
            </button>
            
            <button class="nav-item" data-section="referrals">
                <i class="fas fa-users"></i>
                <span>Рефералы</span>
            </button>
            
            <button class="nav-item" data-section="achievements">
                <i class="fas fa-trophy"></i>
                <span>Достижения</span>
            </button>
            
            <button class="nav-item" data-section="settings">
                <i class="fas fa-cog"></i>
                <span>Настройки</span>
            </button>
        </nav>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notifications-container"></div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confetti-container"></div>

    <!-- Scripts -->
    <script src="/webapp/script.js"></script>
</body>
</html>