# 🌟 Magnum Stars Bot

**Полнофункциональный Telegram бот для заработка** с продвинутыми системами фарма, майнинга, обмена валют, титулов и социальных функций.

## 🚀 Быстрый старт

### Railway (Рекомендуется)
1. **Fork** репозитория
2. Подключите к **Railway**
3. Настройте переменные окружения:
   ```env
   BOT_TOKEN=your_telegram_bot_token
   MONGODB_URI=your_mongodb_connection_string
   WEBAPP_ENABLED=true
   WEBAPP_URL=https://your-app-name.railway.app
   PORT=8080
   NODE_ENV=production
   ```
4. **Deploy** - бот автоматически запустится!

### Render.com
1. **Fork** репозитория
2. Подключите к **Render.com**
3. Настройте переменные окружения:
   ```env
   BOT_TOKEN=your_telegram_bot_token
   MONGODB_URI=your_mongodb_connection_string
   WEBAPP_ENABLED=true
   WEBAPP_URL=https://your-app-name.onrender.com
   PORT=8080
   NODE_ENV=production
   ```
4. **Deploy** - бот автоматически запустится!
5. **Настройте UptimeRobot** для предотвращения "засыпания" (см. [UPTIMEROBOT_SETUP.md](UPTIMEROBOT_SETUP.md))

### Локальная разработка
```bash
git clone https://github.com/your-username/Magnumtap_Bot.git
cd Magnumtap_Bot
npm install
npm start
```

## 🎯 Основные системы

### ⛏️ **Майнинг система**
**Автоматический заработок Magnum Coins каждую минуту**

#### 📊 **Формула расчета награды:**
```
Награда = Базовая_награда × Курс_множитель × Майнеры_множитель × Эффективность × Бонус_титула
```

#### 🔧 **Компоненты:**
- **Базовая награда:** `0.01 MC/минуту`
- **Курс множитель:** `0.1x+` (зависит от курса обмена, без верхнего предела)
- **Майнеры множитель:** `0.3x - 2.0x` (обратно пропорционально количеству майнеров)
- **Эффективность:** `1.0x - 10.0x` (увеличивается с улучшениями)
- **Бонус титула:** `1.0x - 4.0x` (зависит от титула пользователя)

#### ⚡ **Улучшения:**
- **Стоимость:** `Уровень × 100 MC`
- **Эффективность:** `+0.2x` за уровень
- **Максимум:** `10.0x` эффективность

### 🌾 **Фарм система**
**Ручной заработок Magnum Coins с кулдауном**

#### 💰 **Формула награды:**
```
Награда = Базовая_награда + Бонус_за_уровень
Базовая_награда = 10 MC
Бонус_за_уровень = min(Уровень × 0.1, 2) MC
```

#### ⏰ **Кулдаун:**
- **Базовый:** `300 секунд` (5 минут)
- **Настраивается** через админ панель

### 🌐 **WebApp система**
**Современный веб-интерфейс для Telegram**

#### ✨ **Возможности:**
- **Адаптивный дизайн** - работает на всех устройствах
- **Реальное время** - автообновление данных
- **Быстрые действия** - кнопки для основных функций
- **Кнопка "Заработать"** - в нижней панели
- **Темная тема** - автоматическое переключение

#### 🔗 **Доступ:**
- **В боте:** кнопка "🌐 WebApp"
- **Прямая ссылка:** `https://your-domain.com/webapp`
- **Тест:** `https://your-domain.com/webapp/test.html`

### 💱 **Биржа Magnum Exchange**
**Динамический обмен Stars ↔ Magnum Coins**

#### 📈 **Формула курса:**
```
Курс = BASE_RATE × (Magnum_Coins_Резерв / Stars_Резерв)
BASE_RATE = 0.001 Stars за 1 MC
```

#### 🔄 **Динамический множитель:**
- **При ratio ≤ 1:** `множитель = ratio` (минимум 0.001)
- **При ratio > 1:** `множитель = 1 + log10(ratio) × 2` (без ограничений)
- **Минимум:** `0.001x` (для стабильности)

#### 💸 **Комиссия:**
- **Базовая:** `2.5%`
- **Идет в резерв** Magnum Coins

#### 📊 **Рыночные данные:**
- **24ч объем** обменов
- **Общее количество** обменов
- **Ликвидность** резерва
- **История курса** за 24 часа

### 👑 **Система титулов**
**Статусы с бонусами к майнингу**

#### 🏆 **Категории титулов:**

##### 🌱 **Обычные (1.0x - 1.4x):**
- **🌱 Новичок:** `1.0x` (по умолчанию)
- **🚀 Начинающий:** `1.1x` (Уровень 3 или 500 Stars)
- **🎯 Опытный:** `1.2x` (Уровень 10 или 50 фармов)
- **✨ Мастер:** `1.3x` (Уровень 25 или 10K Stars)
- **💫 Эксперт:** `1.4x` (Уровень 50 или 10K MC заработано)

##### 🌟 **Редкие (1.5x - 1.7x):**
- **🌟 Профессионал:** `1.5x` (100K Stars или 10 рефералов)
- **🏆 Чемпион:** `1.6x` (Уровень 75 или 10 достижений)
- **👑 Легенда:** `1.7x` (1M Stars)

##### 🕵️ **Секретные (1.8x - 2.0x):**
- **🕵️ Скрытный:** `1.8x` (Серия 14 дней)
- **🧠 Тактик:** `1.9x` (100 фармов + 5 рефералов)
- **⏳ Усердный:** `2.0x` (Намайнить 5K MC)

##### 🔥 **Легендарные (2.2x - 2.5x):**
- **🔥 Бессмертный:** `2.2x` (1M MC заработано)
- **🐉 Дракон:** `2.4x` (100 рефералов)
- **⚡ Бог:** `2.5x` (Уровень 100 + 50 достижений)

##### 🛡️ **Админские (3.0x - 4.0x):**
- **🛡️ Модератор:** `3.0x` (только для модераторов)
- **⚙️ Администратор:** `3.5x` (только для администраторов)
- **👑 Владелец:** `4.0x` (только для владельцев)

### 📋 **Система заданий**
**RichAds офферы, ежедневные задания и достижения**

#### 🎯 **RichAds офферы:**
- **Подписки на каналы:** `50-200 Stars`
- **Установки приложений:** `100-300 Stars`
- **Регистрации на сайтах:** `75-250 Stars`
- **Просмотры видео:** `25-150 Stars`
- **Опросы и анкеты:** `30-180 Stars`

#### 🔄 **Ежедневные задания:**
- **🌾 Фармер дня:** `5 фармов` → `25 MC`
- **🎁 Бонус дня:** `1 бонус` → `15 MC`
- **💱 Трейдер дня:** `3 обмена` → `30 MC`

#### 🏆 **Достижения:**
- **🎯 Первое задание:** `1 задание` → `100 MC`
- **🎯 Мастер заданий:** `10 заданий` → `500 MC`
- **🎯 Эксперт заданий:** `25 заданий` → `1500 MC`
- **🎯 Легенда заданий:** `50 заданий` → `5000 MC`
- **🎯 Бог заданий:** `100 заданий` → `15000 MC`

### 🎁 **Ежедневный бонус**
**Система стриков с растущими наградами**

#### 📈 **Формула награды:**
```
Награда = Базовый_бонус × (1 + Стрик × 0.1)
Базовый_бонус = 10 MC
Максимум = 50 MC (при стрике 40+ дней)
```

#### 🔥 **Бонусы за стрик:**
- **7 дней:** `+10%` к награде
- **14 дней:** `+20%` к награде
- **30 дней:** `+50%` к награде

### 👥 **Реферальная система**
**Приглашение друзей с наградами**

#### 💰 **Награды:**
- **За реферала:** `100 MC`
- **За каждого реферала реферала:** `10 MC`

#### 📊 **Статистика:**
- **Количество рефералов**
- **Общий заработок** с рефералов
- **Активные рефералы** (за последние 30 дней)

### 🎫 **Система промокодов**
**Активация бонусных кодов**

#### 📝 **Функции:**
- **Создание промокодов** (админ)
- **Активация** пользователями
- **Ограничения** по количеству активаций
- **Уведомления** в чат при активации

### 🗺️ **Роадмап развития**
**Планы развития бота**

#### 📅 **Q4 2025 - Основные функции:**
- ✅ Система гильдий
- ✅ PvP сражения
- ✅ Мини-игры и турниры
- ✅ Система кастомизации

#### 📅 **Q1 2026 - WebApp переход:**
- 🔄 WebApp интеграция
- 🔄 Социальные функции
- 🔄 Персонализация
- 🔄 Push уведомления

#### 📅 **Q2 2026 - Игровые механики:**
- 🎮 Расширенные мини-игры
- 🎮 Система достижений
- 🎮 Сезонные события
- 🎮 Турнирная система

#### 📅 **Q3 2026 - Инновации:**
- 🤖 AI и автоматизация
- 🤖 Умные уведомления
- 🤖 Персональные рекомендации
- 🤖 Автоматические сделки

### 🗳️ **Система голосования**
**Управление голосованиями (админ)**

#### ⚙️ **Функции:**
- **Создание голосований**
- **Управление активными голосованиями**
- **Статистика голосований**
- **История голосований**
- **Удаление голосований**

## 👨‍💼 **Админ панель**

### 🔧 **Управление пользователями:**
- **Просмотр профилей**
- **Блокировка/разблокировка**
- **Изменение балансов**
- **Сброс прогресса**

### 💰 **Управление экономикой:**
- **Резерв валют** (добавление/удаление)
- **Курс обмена** (принудительное обновление)
- **Детали расчета** курса

### 👑 **Управление титулами:**
- **Выдача титулов**
- **Забор титулов**
- **Статистика титулов**
- **Синхронизация титулов**

### ⏰ **Настройки кулдаунов:**
- **Фарм кулдаун**
- **Бонус кулдаун**
- **Обмен кулдаун**

### 🎫 **Управление промокодами:**
- **Создание промокодов**
- **Просмотр статистики**
- **Удаление промокодов**

### 🗳️ **Управление голосованиями:**
- **Создание голосований**
- **Активные голосования**
- **Статистика и история**

## 📊 **Система уровней и рангов**

### 📈 **Формула опыта:**
```
Опыт_за_действие = Базовая_награда × 5
Уровень = floor(√(Общий_опыт / 100)) + 1
```

### 🏆 **Система рангов:**
- **🌱 Новичок:** `Уровень 1-4`
- **⚔️ Боец:** `Уровень 5-9`
- **🏹 Лучник:** `Уровень 10-19`
- **🛡️ Рыцарь:** `Уровень 20-34`
- **⚔️ Воин:** `Уровень 35-49`
- **👑 Герой:** `Уровень 50-74`
- **🌟 Легенда:** `Уровень 75-99`
- **🔥 Император:** `Уровень 100+`

## 🔧 **Технические особенности**

### 🗄️ **База данных:**
- **MongoDB** с оптимизированными индексами
- **Кеширование** пользователей и статистики
- **Автоматическая очистка** кеша

### ⚡ **Производительность:**
- **Асинхронная обработка** всех операций
- **Оптимизированные запросы** к БД
- **Минимальная нагрузка** на сервер

### 📝 **Логирование:**
- **Детальные логи** всех операций
- **Отслеживание ошибок**
- **Мониторинг производительности**

### 🔒 **Безопасность:**
- **Валидация** всех входных данных
- **Защита от спама**
- **Ограничения** на операции

## 🚀 **Развертывание**

### **Переменные окружения:**
```env
BOT_TOKEN=your_telegram_bot_token
MONGODB_URI=your_mongodb_connection_string
PORT=8080
NODE_ENV=production

# RichAds интеграция (опционально)
RICHADS_API_KEY=rk_your_api_key_here
RICHADS_ENABLED=true
```

### **Зависимости:**
```json
{
  "telegraf": "^4.15.0",
  "mongodb": "^6.0.0",
  "express": "^4.18.2",
  "axios": "^1.6.0",
  "dotenv": "^16.3.1"
}
```

### **Автоматические процессы:**
- **Майнинг:** каждые 30 минут
- **Очистка кеша:** каждые 5 минут
- **Сброс ежедневных заданий:** каждый день в 00:00 UTC

## 📈 **Мониторинг**

### **Health Check Endpoints:**
Бот предоставляет несколько эндпоинтов для мониторинга:

- **`/health`** - Основная проверка работоспособности
- **`/ping`** - Простая проверка (возвращает "pong")
- **`/api/status`** - Детальная информация о состоянии бота
- **`/`** - Корневой эндпоинт с базовой информацией

### **UptimeRobot Integration:**
Для предотвращения "засыпания" на Render.com:

1. **Настройте UptimeRobot** (см. [UPTIMEROBOT_SETUP.md](UPTIMEROBOT_SETUP.md))
2. **Используйте URL:** `https://your-app-name.onrender.com/health`
3. **Интервал:** 5-10 минут
4. **Таймаут:** 30-60 секунд

### **Тестирование эндпоинтов:**
```bash
# Локальное тестирование
node test-endpoints.js

# Тестирование удаленного сервера
node test-endpoints.js https://your-app-name.onrender.com
```

### **Метрики:**
- Количество активных пользователей
- Общий объем транзакций
- Производительность системы
- Ошибки и исключения

### **Алерты:**
- Высокая нагрузка на БД
- Критические ошибки
- Низкий баланс резерва
- Недоступность бота

## 🤝 **Поддержка**

### **Каналы поддержки:**
- **Telegram:** @magnumtapchat
- **GitHub Issues:** для багов и предложений
- **Документация:** в этом README

### **Вклад в проект:**
1. **Fork** репозитория
2. Создайте **feature branch**
3. Внесите изменения
4. Создайте **Pull Request**

---

## 📄 **Лицензия**

MIT License - см. файл [LICENSE](LICENSE) для деталей.

## 🙏 **Благодарности**

Спасибо всем участникам сообщества за идеи, тестирование и поддержку проекта!

---

**🌟 Magnum Stars Bot** - ваш путь к успеху в мире криптовалютных игр!